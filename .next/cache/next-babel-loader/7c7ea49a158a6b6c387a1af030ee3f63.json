{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lucas\\\\Documents\\\\quiltros\\\\pages\\\\index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport { Component, createRef } from 'react';\nimport Canvas from '../components/canvas';\nimport LeftSidebar from '../components/LeftSideBar';\nimport Nav from '../components/Nav';\nimport { containerStyle, pageStyle } from './styles';\nimport * as icons from '../assets/icons';\nimport Konva from 'konva';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      canvasImage: null,\n      canvasTexts: {\n        selectedTextBlock: '',\n        textBlocks: {}\n      },\n      formValues: {\n        chip: false,\n        'edad-mascota': '',\n        'email-contacto': '',\n        esterilizado: false,\n        'informacion-extra-mascota': '',\n        'nombre-contacto': '',\n        'nombre-mascota': '',\n        'tamaño-mascota': '',\n        'telefono-contacto': '',\n        vacunas: false,\n        'whatsapp-contacto': '',\n        'caso-mascota': '',\n        'ciudad-contacto': '',\n        'sexo-mascota': ''\n      },\n      characteristics: {},\n      canvasHeight: 750,\n      canvasWidth: 500\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stageRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"setSelectedTextBlock\", function (selectedTextBlock) {\n      var canvasTexts = _this.state.canvasTexts;\n\n      _this.setState({\n        canvasTexts: _objectSpread({}, canvasTexts, {\n          selectedTextBlock: selectedTextBlock\n        })\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCanvasImage\", function (image) {\n      _this.setState({\n        canvasImage: image\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTextChanged\", function (key, value, id) {\n      var canvasTexts = _this.state.canvasTexts;\n      var textBlocks = canvasTexts.textBlocks;\n\n      _this.setState({\n        canvasTexts: _objectSpread({}, canvasTexts, {\n          textBlocks: _objectSpread({}, textBlocks, _defineProperty({}, id, _objectSpread({}, textBlocks[id], _defineProperty({}, key, value))))\n        })\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTextBlockChanged\", function (id, text) {\n      var canvasTexts = _this.state.canvasTexts;\n      var textBlocks = canvasTexts.textBlocks;\n\n      _this.setState({\n        canvasTexts: _objectSpread({}, canvasTexts, {\n          textBlocks: _objectSpread({}, textBlocks, _defineProperty({}, id, _objectSpread({}, textBlocks[id], {\n            text: text\n          })))\n        })\n      }, function () {\n        console.log(_this.state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setAdoptionFormField\", function (key, value) {\n      var _this$state = _this.state,\n          canvasTexts = _this$state.canvasTexts,\n          canvasHeight = _this$state.canvasHeight,\n          canvasWidth = _this$state.canvasWidth,\n          characteristics = _this$state.characteristics;\n      var textBlocks = canvasTexts.textBlocks;\n      var actualCharacteristics = characteristics;\n      var newTextBlock = {\n        id: key,\n        color: 'black',\n        text: value,\n        fontSize: 'medium',\n        position: {\n          x: 0,\n          y: 0\n        }\n      };\n      var characteristic = {\n        priority: '',\n        text: '',\n        icon: ''\n      };\n      var validator = '';\n\n      switch (key) {\n        case 'nombre-mascota':\n          newTextBlock.align = 'center';\n          newTextBlock.width = canvasWidth;\n          newTextBlock.position.y = canvasHeight * 0.1;\n          newTextBlock.style = 'bold';\n          newTextBlock.fontSize = 'large';\n          validator = 'textBlock';\n          break;\n\n        case 'caso-mascota':\n          newTextBlock.align = 'center';\n          newTextBlock.width = canvasWidth;\n          newTextBlock.position.y = canvasHeight * 0.2;\n          newTextBlock.text = value === '1' ? \"En adopción\" : 'Perdido';\n          validator = 'textBlock';\n          break;\n\n        case 'edad-mascota':\n          characteristic = {\n            priority: '0',\n            icon: icons.birthday_cake,\n            text: value\n          };\n          validator = 'characteristic';\n          break;\n\n        case 'sexo-mascota':\n          characteristic = {\n            priority: '1',\n            icon: value === '1' ? icons.mars : icons.venus,\n            text: value === '1' ? 'Macho' : 'Hembra'\n          };\n          validator = 'characteristic';\n          break;\n\n        case 'tamaño-mascota':\n          characteristic = {\n            priority: '3',\n            icon: icons.dog,\n            text: value === 's' ? 'Pequeño' : value === 'm' ? 'Mediano' : 'Grande'\n          };\n          validator = 'characteristic';\n          break;\n\n        case 'esterilizado':\n          if (value) {\n            characteristic = {\n              priority: '4',\n              icon: icons.band_aid,\n              text: 'Esterilizado'\n            };\n            validator = 'characteristic';\n          } else {\n            delete actualCharacteristics['4'];\n            validator = 'deletedCharacteristic';\n          }\n\n          break;\n\n        case 'chip':\n          if (value) {\n            characteristic = {\n              priority: '5',\n              icon: icons.paw,\n              text: 'Con chip'\n            };\n            validator = 'characteristic';\n          } else {\n            delete actualCharacteristics['5'];\n            validator = 'deletedCharacteristic';\n          }\n\n          break;\n\n        case 'vacunas':\n          if (value) {\n            characteristic = {\n              priority: '6',\n              icon: icons.syringe,\n              text: 'Al día'\n            };\n            validator = 'characteristic';\n          } else {\n            delete actualCharacteristics['6'];\n            validator = 'deletedCharacteristic';\n          }\n\n          break;\n\n        case 'nombre-contacto':\n          newTextBlock.fontSize = 'small';\n          newTextBlock.position = {\n            x: canvasWidth * 0.8,\n            y: canvasHeight * 0.7\n          };\n          validator = 'textBlock';\n          break;\n\n        case 'telefono-contacto':\n          newTextBlock.fontSize = 'small';\n          newTextBlock.position = {\n            x: canvasWidth * 0.8,\n            y: canvasHeight * 0.7 + 20\n          };\n          validator = 'textBlock';\n          break;\n\n        case 'email-contacto':\n          newTextBlock.fontSize = 'small';\n          newTextBlock.position = {\n            x: canvasWidth * 0.8,\n            y: canvasHeight * 0.7 + 40\n          };\n          validator = 'textBlock';\n          break;\n\n        case 'ciudad-contacto':\n          newTextBlock.fontSize = 'small';\n          newTextBlock.position = {\n            x: canvasWidth * 0.8,\n            y: canvasHeight * 0.7 + 60\n          };\n          validator = 'textBlock';\n          break;\n      }\n\n      if (validator === 'textBlock') {\n        _this.setState({\n          formValues: _objectSpread({}, _this.state.formValues, _defineProperty({}, key, value)),\n          canvasTexts: _objectSpread({}, canvasTexts, {\n            textBlocks: _objectSpread({}, textBlocks, _defineProperty({}, key, newTextBlock))\n          })\n        });\n      } else if (validator === 'characteristic') {\n        _this.setState({\n          formValues: _objectSpread({}, _this.state.formValues, _defineProperty({}, key, value)),\n          characteristics: _objectSpread({}, characteristics, _defineProperty({}, characteristic.priority, characteristic))\n        });\n      } else if (validator = 'deletedCharacteristic') {\n        _this.setState({\n          formValues: _objectSpread({}, _this.state.formValues, _defineProperty({}, key, value)),\n          characteristics: actualCharacteristics\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteCharacteristic\", function (characPriority) {\n      var characteristics = _this.state.characteristics;\n      var actualCharacteristics = characteristics;\n      var updatePriority = {};\n\n      _Object$keys(characteristics).forEach(function (priority) {\n        if (priority !== characPriority) {\n          updatePriority[priority] = actualCharacteristics[priority];\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addTextBlockWithData\", function (newTextblock) {\n      var canvasTexts = _this.state.canvasTexts;\n      var textBlocks = canvasTexts.textBlocks;\n      var id = newTextblock.id;\n\n      _this.setState({\n        canvasTexts: _objectSpread({}, canvasTexts, {\n          textBlocks: _objectSpread({}, textBlocks, _defineProperty({}, id, newTextblock))\n        })\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //this.addTextBlock();\n      console.log(window.devicePixelRatio);\n    }\n  }, {\n    key: \"test\",\n    value: function test() {\n      var stage = new Konva.Stage({\n        container: 'testcanvas',\n        width: 500,\n        height: 750\n      });\n      var layer = new Konva.Layer();\n      var layer2 = new Konva.Layer();\n      var layer3 = new Konva.Layer();\n      var layer4 = new Konva.Layer();\n      var text = new Konva.Text({\n        text: 'Perritu',\n        fontSize: 20,\n        width: 500,\n        align: 'center',\n        y: 50,\n        fontStyle: 'bold'\n      });\n      var text2 = new Konva.Text({\n        text: 'Aaaaaaaaa',\n        fontSize: 15,\n        width: 500,\n        align: 'center',\n        y: 150\n      });\n      var text3 = new Konva.Text({\n        text: 'uwu',\n        fontSize: 10,\n        y: 250,\n        x: 60\n      });\n      var text4 = new Konva.Text({\n        text: 'uwu',\n        fontSize: 10,\n        y: 450,\n        x: 90\n      }); // create label\n\n      var label = new Konva.Label({\n        x: 100,\n        y: 100,\n        draggable: true\n      }); // add a tag to the label\n\n      label.add(new Konva.Tag({\n        fill: 'transparent'\n      })); // add text to the label\n\n      label.add(new Konva.Text({\n        text: 'Hello World!',\n        fontSize: 20,\n        lineHeight: 1.2,\n        padding: 10,\n        fill: 'green'\n      }));\n      layer.add(label);\n      layer.add(text);\n      layer2.add(text2);\n      layer3.add(text3);\n      layer4.add(text4);\n      stage.add(layer);\n      stage.add(layer2);\n      stage.add(layer3);\n      stage.add(layer4);\n      var imgB64 = stage.toDataURL({\n        pixelRatio: 3,\n        quality: 1,\n        mimeType: 'image/png',\n        width: 500,\n        height: 750\n      }); //document.write('img src=\"'+imgB64+'\" />');\n\n      var link = document.createElement('a');\n      link.download = \"Test\";\n      link.href = imgB64;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          canvasImage = _this$state2.canvasImage,\n          canvasTexts = _this$state2.canvasTexts,\n          formValues = _this$state2.formValues,\n          canvasHeight = _this$state2.canvasHeight,\n          canvasWidth = _this$state2.canvasWidth,\n          characteristics = _this$state2.characteristics;\n      var selectedTextBlock = canvasTexts.selectedTextBlock,\n          textBlocks = canvasTexts.textBlocks;\n      return jsx(\"div\", {\n        css: pageStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, jsx(Nav, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }), jsx(\"section\", {\n        \"data-name\": \"bodycontainer\",\n        css: containerStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, jsx(LeftSidebar, {\n        canvasRef: this.stageRef,\n        formValues: formValues,\n        onTextBlockInteracted: this.setSelectedTextBlock,\n        selectedTextBlock: selectedTextBlock,\n        textBlocks: textBlocks,\n        onInputChanged: this.setAdoptionFormField,\n        onTextChanged: this.onTextChanged,\n        addTextBlockWithData: this.addTextBlockWithData,\n        onImageUploaded: this.setCanvasImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }), jsx(Canvas, {\n        canvasRef: this.stageRef,\n        canvasTexts: canvasTexts,\n        currentCanvasText: textBlocks[selectedTextBlock],\n        image: canvasImage,\n        onRef: this.stageRef,\n        onTextChanged: this.onTextBlockChanged,\n        onTextBlockSelected: this.setSelectedTextBlock,\n        canvasHeight: canvasHeight,\n        canvasWidth: canvasWidth,\n        characteristics: characteristics,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469\n        },\n        __self: this\n      })), jsx(\"div\", {\n        id: \"testcanvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      }), jsx(\"button\", {\n        onClick: this.test,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, \"Hola\"));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/Lucas/Documents/quiltros/pages/index.tsx"],"names":["jsx","Component","createRef","Canvas","LeftSidebar","Nav","containerStyle","pageStyle","icons","Konva","Home","canvasImage","canvasTexts","selectedTextBlock","textBlocks","formValues","chip","esterilizado","vacunas","characteristics","canvasHeight","canvasWidth","state","setState","image","key","value","id","text","console","log","actualCharacteristics","newTextBlock","color","fontSize","position","x","y","characteristic","priority","icon","validator","align","width","style","birthday_cake","mars","venus","dog","band_aid","paw","syringe","characPriority","updatePriority","forEach","newTextblock","window","devicePixelRatio","stage","Stage","container","height","layer","Layer","layer2","layer3","layer4","Text","fontStyle","text2","text3","text4","label","Label","draggable","add","Tag","fill","lineHeight","padding","imgB64","toDataURL","pixelRatio","quality","mimeType","link","document","createElement","download","href","body","appendChild","click","removeChild","stageRef","setSelectedTextBlock","setAdoptionFormField","onTextChanged","addTextBlockWithData","setCanvasImage","onTextBlockChanged","test"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,GAAT,QAAoB,eAApB;AAEA,SAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AAEA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,cAAT,EAAyBC,SAAzB,QAA0C,UAA1C;AACA,OAAO,KAAKC,KAAZ,MAAuB,iBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAyDMC,I;;;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,WAAW,EAAE,IADP;AAENC,MAAAA,WAAW,EAAE;AACXC,QAAAA,iBAAiB,EAAG,EADT;AAEXC,QAAAA,UAAU,EAAE;AAFD,OAFP;AAMNC,MAAAA,UAAU,EAAE;AACVC,QAAAA,IAAI,EAAE,KADI;AAEV,wBAAgB,EAFN;AAGV,0BAAkB,EAHR;AAIVC,QAAAA,YAAY,EAAE,KAJJ;AAKV,qCAA6B,EALnB;AAMV,2BAAmB,EANT;AAOV,0BAAkB,EAPR;AAQV,0BAAkB,EARR;AASV,6BAAqB,EATX;AAUVC,QAAAA,OAAO,EAAE,KAVC;AAWV,6BAAqB,EAXX;AAYV,wBAAgB,EAZN;AAaV,2BAAmB,EAbT;AAcV,wBAAgB;AAdN,OANN;AAsBNC,MAAAA,eAAe,EAAE,EAtBX;AAuBNC,MAAAA,YAAY,EAAE,GAvBR;AAwBNC,MAAAA,WAAW,EAAE;AAxBP,K;;+DA2BGnB,SAAS,E;;2EAOG,UAACW,iBAAD,EAA+B;AAAA,UAC5CD,WAD4C,GAC5B,MAAKU,KADuB,CAC5CV,WAD4C;;AAEpD,YAAKW,QAAL,CAAc;AACZX,QAAAA,WAAW,oBACNA,WADM;AAETC,UAAAA,iBAAiB,EAAjBA;AAFS;AADC,OAAd;AAMD,K;;qEAEgB,UAACW,KAAD,EAA6B;AAC5C,YAAKD,QAAL,CAAc;AACZZ,QAAAA,WAAW,EAAEa;AADD,OAAd;AAGD,K;;oEAEe,UAACC,GAAD,EAAcC,KAAd,EAA6BC,EAA7B,EAA4C;AAAA,UAClDf,WADkD,GAClC,MAAKU,KAD6B,CAClDV,WADkD;AAAA,UAElDE,UAFkD,GAEnCF,WAFmC,CAElDE,UAFkD;;AAG1D,YAAKS,QAAL,CAAc;AACZX,QAAAA,WAAW,oBACNA,WADM;AAETE,UAAAA,UAAU,oBACLA,UADK,sBAEPa,EAFO,oBAGHb,UAAU,CAACa,EAAD,CAHP,sBAILF,GAJK,EAICC,KAJD;AAFD;AADC,OAAd;AAYD,K;;yEAEoB,UAACC,EAAD,EAAaC,IAAb,EAA8B;AAAA,UACzChB,WADyC,GACzB,MAAKU,KADoB,CACzCV,WADyC;AAAA,UAEzCE,UAFyC,GAE1BF,WAF0B,CAEzCE,UAFyC;;AAGjD,YAAKS,QAAL,CACE;AACEX,QAAAA,WAAW,oBACNA,WADM;AAETE,UAAAA,UAAU,oBACLA,UADK,sBAEPa,EAFO,oBAGHb,UAAU,CAACa,EAAD,CAHP;AAINC,YAAAA,IAAI,EAAJA;AAJM;AAFD;AADb,OADF,EAaE,YAAM;AACJC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKR,KAAjB;AACD,OAfH;AAiBD,K;;2EAEsB,UAACG,GAAD,EAA2BC,KAA3B,EAA0C;AAAA,wBACK,MAAKJ,KADV;AAAA,UACvDV,WADuD,eACvDA,WADuD;AAAA,UAC1CQ,YAD0C,eAC1CA,YAD0C;AAAA,UAC5BC,WAD4B,eAC5BA,WAD4B;AAAA,UACfF,eADe,eACfA,eADe;AAAA,UAEvDL,UAFuD,GAExCF,WAFwC,CAEvDE,UAFuD;AAG/D,UAAMiB,qBAAuC,GAAGZ,eAAhD;AACA,UAAIa,YAA+B,GAAG;AACpCL,QAAAA,EAAE,EAAEF,GADgC;AAEpCQ,QAAAA,KAAK,EAAE,OAF6B;AAGpCL,QAAAA,IAAI,EAAEF,KAH8B;AAIpCQ,QAAAA,QAAQ,EAAE,QAJ0B;AAKpCC,QAAAA,QAAQ,EAAE;AAACC,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE;AAAV;AAL0B,OAAtC;AAOA,UAAIC,cAAsC,GAAG;AAC3CC,QAAAA,QAAQ,EAAE,EADiC;AAE3CX,QAAAA,IAAI,EAAE,EAFqC;AAG3CY,QAAAA,IAAI,EAAE;AAHqC,OAA7C;AAKA,UAAIC,SAAwE,GAAE,EAA9E;;AACA,cAAQhB,GAAR;AACE,aAAK,gBAAL;AACEO,UAAAA,YAAY,CAACU,KAAb,GAAqB,QAArB;AACAV,UAAAA,YAAY,CAACW,KAAb,GAAqBtB,WAArB;AACAW,UAAAA,YAAY,CAACG,QAAb,CAAsBE,CAAtB,GAA0BjB,YAAY,GAAC,GAAvC;AACAY,UAAAA,YAAY,CAACY,KAAb,GAAqB,MAArB;AACAZ,UAAAA,YAAY,CAACE,QAAb,GAAwB,OAAxB;AACAO,UAAAA,SAAS,GAAG,WAAZ;AACA;;AACF,aAAK,cAAL;AACET,UAAAA,YAAY,CAACU,KAAb,GAAqB,QAArB;AACAV,UAAAA,YAAY,CAACW,KAAb,GAAqBtB,WAArB;AACAW,UAAAA,YAAY,CAACG,QAAb,CAAsBE,CAAtB,GAA0BjB,YAAY,GAAC,GAAvC;AACAY,UAAAA,YAAY,CAACJ,IAAb,GAAoBF,KAAK,KAAK,GAAV,GAAgB,aAAhB,GAAgC,SAApD;AACAe,UAAAA,SAAS,GAAG,WAAZ;AACA;;AACF,aAAK,cAAL;AACEH,UAAAA,cAAc,GAAG;AACfC,YAAAA,QAAQ,EAAE,GADK;AAEfC,YAAAA,IAAI,EAAEhC,KAAK,CAACqC,aAFG;AAGfjB,YAAAA,IAAI,EAAEF;AAHS,WAAjB;AAKAe,UAAAA,SAAS,GAAG,gBAAZ;AACA;;AACF,aAAK,cAAL;AACEH,UAAAA,cAAc,GAAG;AACfC,YAAAA,QAAQ,EAAE,GADK;AAEfC,YAAAA,IAAI,EAAEd,KAAK,KAAK,GAAV,GAAgBlB,KAAK,CAACsC,IAAtB,GAA6BtC,KAAK,CAACuC,KAF1B;AAGfnB,YAAAA,IAAI,EAAEF,KAAK,KAAK,GAAV,GAAgB,OAAhB,GAA0B;AAHjB,WAAjB;AAKAe,UAAAA,SAAS,GAAG,gBAAZ;AACA;;AACF,aAAK,gBAAL;AACEH,UAAAA,cAAc,GAAG;AACfC,YAAAA,QAAQ,EAAE,GADK;AAEfC,YAAAA,IAAI,EAAEhC,KAAK,CAACwC,GAFG;AAGfpB,YAAAA,IAAI,EAAEF,KAAK,KAAK,GAAV,GAAgB,SAAhB,GAA4BA,KAAK,KAAK,GAAV,GAAgB,SAAhB,GAA4B;AAH/C,WAAjB;AAKAe,UAAAA,SAAS,GAAG,gBAAZ;AACA;;AACF,aAAK,cAAL;AACE,cAAGf,KAAH,EAAU;AACRY,YAAAA,cAAc,GAAG;AACfC,cAAAA,QAAQ,EAAE,GADK;AAEfC,cAAAA,IAAI,EAAEhC,KAAK,CAACyC,QAFG;AAGfrB,cAAAA,IAAI,EAAE;AAHS,aAAjB;AAKAa,YAAAA,SAAS,GAAG,gBAAZ;AACD,WAPD,MAQK;AACH,mBAAOV,qBAAqB,CAAC,GAAD,CAA5B;AACAU,YAAAA,SAAS,GAAG,uBAAZ;AACD;;AACD;;AACF,aAAK,MAAL;AACE,cAAGf,KAAH,EAAU;AACRY,YAAAA,cAAc,GAAG;AACfC,cAAAA,QAAQ,EAAE,GADK;AAEfC,cAAAA,IAAI,EAAEhC,KAAK,CAAC0C,GAFG;AAGftB,cAAAA,IAAI,EAAE;AAHS,aAAjB;AAKAa,YAAAA,SAAS,GAAG,gBAAZ;AACD,WAPD,MAQK;AACH,mBAAOV,qBAAqB,CAAC,GAAD,CAA5B;AACAU,YAAAA,SAAS,GAAG,uBAAZ;AACD;;AACD;;AACF,aAAK,SAAL;AACE,cAAGf,KAAH,EAAU;AACRY,YAAAA,cAAc,GAAG;AACfC,cAAAA,QAAQ,EAAE,GADK;AAEfC,cAAAA,IAAI,EAAEhC,KAAK,CAAC2C,OAFG;AAGfvB,cAAAA,IAAI,EAAE;AAHS,aAAjB;AAKAa,YAAAA,SAAS,GAAG,gBAAZ;AACD,WAPD,MAQK;AACH,mBAAOV,qBAAqB,CAAC,GAAD,CAA5B;AACAU,YAAAA,SAAS,GAAG,uBAAZ;AACD;;AACD;;AACF,aAAK,iBAAL;AACET,UAAAA,YAAY,CAACE,QAAb,GAAwB,OAAxB;AACAF,UAAAA,YAAY,CAACG,QAAb,GAAwB;AAACC,YAAAA,CAAC,EAAEf,WAAW,GAAC,GAAhB;AAAqBgB,YAAAA,CAAC,EAAEjB,YAAY,GAAC;AAArC,WAAxB;AACAqB,UAAAA,SAAS,GAAG,WAAZ;AACA;;AACF,aAAK,mBAAL;AACET,UAAAA,YAAY,CAACE,QAAb,GAAwB,OAAxB;AACAF,UAAAA,YAAY,CAACG,QAAb,GAAwB;AAACC,YAAAA,CAAC,EAAEf,WAAW,GAAC,GAAhB;AAAqBgB,YAAAA,CAAC,EAAEjB,YAAY,GAAC,GAAb,GAAmB;AAA3C,WAAxB;AACAqB,UAAAA,SAAS,GAAG,WAAZ;AACA;;AACA,aAAK,gBAAL;AACET,UAAAA,YAAY,CAACE,QAAb,GAAwB,OAAxB;AACAF,UAAAA,YAAY,CAACG,QAAb,GAAwB;AAACC,YAAAA,CAAC,EAAEf,WAAW,GAAC,GAAhB;AAAqBgB,YAAAA,CAAC,EAAEjB,YAAY,GAAC,GAAb,GAAmB;AAA3C,WAAxB;AACAqB,UAAAA,SAAS,GAAG,WAAZ;AACA;;AACF,aAAK,iBAAL;AACET,UAAAA,YAAY,CAACE,QAAb,GAAwB,OAAxB;AACAF,UAAAA,YAAY,CAACG,QAAb,GAAwB;AAACC,YAAAA,CAAC,EAAEf,WAAW,GAAC,GAAhB;AAAqBgB,YAAAA,CAAC,EAAEjB,YAAY,GAAC,GAAb,GAAmB;AAA3C,WAAxB;AACAqB,UAAAA,SAAS,GAAG,WAAZ;AACA;AArGN;;AAwGA,UAAGA,SAAS,KAAK,WAAjB,EAA8B;AAC5B,cAAKlB,QAAL,CAAc;AACZR,UAAAA,UAAU,oBACL,MAAKO,KAAL,CAAWP,UADN,sBAEPU,GAFO,EAEDC,KAFC,EADE;AAKZd,UAAAA,WAAW,oBACNA,WADM;AAETE,YAAAA,UAAU,oBACLA,UADK,sBAEPW,GAFO,EAEDO,YAFC;AAFD;AALC,SAAd;AAaD,OAdD,MAeK,IAAIS,SAAS,KAAK,gBAAlB,EAAoC;AACvC,cAAKlB,QAAL,CAAc;AACZR,UAAAA,UAAU,oBACL,MAAKO,KAAL,CAAWP,UADN,sBAEPU,GAFO,EAEDC,KAFC,EADE;AAKZP,UAAAA,eAAe,oBACVA,eADU,sBAEZmB,cAAc,CAACC,QAFH,EAEcD,cAFd;AALH,SAAd;AAUD,OAXI,MAYA,IAAIG,SAAS,GAAG,uBAAhB,EAAyC;AAC5C,cAAKlB,QAAL,CAAc;AACZR,UAAAA,UAAU,oBACL,MAAKO,KAAL,CAAWP,UADN,sBAEPU,GAFO,EAEDC,KAFC,EADE;AAKZP,UAAAA,eAAe,EAAEY;AALL,SAAd;AAOD;AACF,K;;2EAEsB,UAACqB,cAAD,EAA4B;AAAA,UACzCjC,eADyC,GACrB,MAAKG,KADgB,CACzCH,eADyC;AAEjD,UAAMY,qBAAuC,GAAGZ,eAAhD;AACA,UAAMkC,cAAgC,GAAG,EAAzC;;AACA,mBAAYlC,eAAZ,EAA6BmC,OAA7B,CAAqC,UAAAf,QAAQ,EAAI;AAC/C,YAAIA,QAAQ,KAAKa,cAAjB,EAAiC;AAC/BC,UAAAA,cAAc,CAACd,QAAD,CAAd,GAA2BR,qBAAqB,CAACQ,QAAD,CAAhD;AACD;AACF,OAJD;AAKD,K;;2EAyBsB,UAACgB,YAAD,EAAqC;AAAA,UAClD3C,WADkD,GAClC,MAAKU,KAD6B,CAClDV,WADkD;AAAA,UAElDE,UAFkD,GAEnCF,WAFmC,CAElDE,UAFkD;AAG1D,UAAMa,EAAE,GAAG4B,YAAY,CAAC5B,EAAxB;;AACA,YAAKJ,QAAL,CAAc;AACZX,QAAAA,WAAW,oBACNA,WADM;AAETE,UAAAA,UAAU,oBACLA,UADK,sBAEPa,EAFO,EAEF4B,YAFE;AAFD;AADC,OAAd;AASD,K;;;;;;;wCA1QmB;AAClB;AACA1B,MAAAA,OAAO,CAACC,GAAR,CAAY0B,MAAM,CAACC,gBAAnB;AACD;;;2BAyQM;AACL,UAAIC,KAAK,GAAG,IAAIjD,KAAK,CAACkD,KAAV,CAAgB;AAC1BC,QAAAA,SAAS,EAAE,YADe;AAE1BjB,QAAAA,KAAK,EAAE,GAFmB;AAG1BkB,QAAAA,MAAM,EAAE;AAHkB,OAAhB,CAAZ;AAMA,UAAIC,KAAK,GAAG,IAAIrD,KAAK,CAACsD,KAAV,EAAZ;AACA,UAAIC,MAAM,GAAG,IAAIvD,KAAK,CAACsD,KAAV,EAAb;AACA,UAAIE,MAAM,GAAG,IAAIxD,KAAK,CAACsD,KAAV,EAAb;AACA,UAAIG,MAAM,GAAG,IAAIzD,KAAK,CAACsD,KAAV,EAAb;AAEA,UAAInC,IAAI,GAAG,IAAInB,KAAK,CAAC0D,IAAV,CAAe;AACxBvC,QAAAA,IAAI,EAAE,SADkB;AAExBM,QAAAA,QAAQ,EAAE,EAFc;AAGxBS,QAAAA,KAAK,EAAE,GAHiB;AAIxBD,QAAAA,KAAK,EAAE,QAJiB;AAKxBL,QAAAA,CAAC,EAAC,EALsB;AAMxB+B,QAAAA,SAAS,EAAE;AANa,OAAf,CAAX;AASA,UAAIC,KAAK,GAAG,IAAI5D,KAAK,CAAC0D,IAAV,CAAe;AACzBvC,QAAAA,IAAI,EAAE,WADmB;AAEzBM,QAAAA,QAAQ,EAAE,EAFe;AAGzBS,QAAAA,KAAK,EAAE,GAHkB;AAIzBD,QAAAA,KAAK,EAAE,QAJkB;AAKzBL,QAAAA,CAAC,EAAC;AALuB,OAAf,CAAZ;AAQA,UAAIiC,KAAK,GAAG,IAAI7D,KAAK,CAAC0D,IAAV,CAAe;AACzBvC,QAAAA,IAAI,EAAE,KADmB;AAEzBM,QAAAA,QAAQ,EAAE,EAFe;AAGzBG,QAAAA,CAAC,EAAC,GAHuB;AAIzBD,QAAAA,CAAC,EAAE;AAJsB,OAAf,CAAZ;AAOA,UAAImC,KAAK,GAAG,IAAI9D,KAAK,CAAC0D,IAAV,CAAe;AACzBvC,QAAAA,IAAI,EAAE,KADmB;AAEzBM,QAAAA,QAAQ,EAAE,EAFe;AAGzBG,QAAAA,CAAC,EAAC,GAHuB;AAIzBD,QAAAA,CAAC,EAAE;AAJsB,OAAf,CAAZ,CApCK,CA2CL;;AACA,UAAIoC,KAAK,GAAG,IAAI/D,KAAK,CAACgE,KAAV,CAAgB;AAC1BrC,QAAAA,CAAC,EAAE,GADuB;AAE1BC,QAAAA,CAAC,EAAE,GAFuB;AAG1BqC,QAAAA,SAAS,EAAE;AAHe,OAAhB,CAAZ,CA5CK,CAkDL;;AACAF,MAAAA,KAAK,CAACG,GAAN,CAAU,IAAIlE,KAAK,CAACmE,GAAV,CAAc;AACtBC,QAAAA,IAAI,EAAE;AADgB,OAAd,CAAV,EAnDK,CAuDL;;AACAL,MAAAA,KAAK,CAACG,GAAN,CAAU,IAAIlE,KAAK,CAAC0D,IAAV,CAAe;AACvBvC,QAAAA,IAAI,EAAE,cADiB;AAEvBM,QAAAA,QAAQ,EAAE,EAFa;AAGvB4C,QAAAA,UAAU,EAAE,GAHW;AAIvBC,QAAAA,OAAO,EAAE,EAJc;AAKvBF,QAAAA,IAAI,EAAE;AALiB,OAAf,CAAV;AAQAf,MAAAA,KAAK,CAACa,GAAN,CAAUH,KAAV;AAEAV,MAAAA,KAAK,CAACa,GAAN,CAAU/C,IAAV;AACAoC,MAAAA,MAAM,CAACW,GAAP,CAAWN,KAAX;AACAJ,MAAAA,MAAM,CAACU,GAAP,CAAWL,KAAX;AACAJ,MAAAA,MAAM,CAACS,GAAP,CAAWJ,KAAX;AACAb,MAAAA,KAAK,CAACiB,GAAN,CAAUb,KAAV;AACAJ,MAAAA,KAAK,CAACiB,GAAN,CAAUX,MAAV;AACAN,MAAAA,KAAK,CAACiB,GAAN,CAAUV,MAAV;AACAP,MAAAA,KAAK,CAACiB,GAAN,CAAUT,MAAV;AAEA,UAAMc,MAAM,GAAGtB,KAAK,CAACuB,SAAN,CAAgB;AAAEC,QAAAA,UAAU,EAAE,CAAd;AAAiBC,QAAAA,OAAO,EAAC,CAAzB;AAA4BC,QAAAA,QAAQ,EAAE,WAAtC;AAAmDzC,QAAAA,KAAK,EAAE,GAA1D;AAA+DkB,QAAAA,MAAM,EAAE;AAAvE,OAAhB,CAAf,CA3EK,CA4EL;;AACA,UAAIwB,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX;AACAF,MAAAA,IAAI,CAACG,QAAL,GAAgB,MAAhB;AACAH,MAAAA,IAAI,CAACI,IAAL,GAAYT,MAAZ;AACAM,MAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,IAA1B;AACAA,MAAAA,IAAI,CAACO,KAAL;AACAN,MAAAA,QAAQ,CAACI,IAAT,CAAcG,WAAd,CAA0BR,IAA1B;AACD;;;6BAEQ;AAAA,yBACsF,KAAK/D,KAD3F;AAAA,UACCX,WADD,gBACCA,WADD;AAAA,UACcC,WADd,gBACcA,WADd;AAAA,UAC2BG,UAD3B,gBAC2BA,UAD3B;AAAA,UACuCK,YADvC,gBACuCA,YADvC;AAAA,UACqDC,WADrD,gBACqDA,WADrD;AAAA,UACkEF,eADlE,gBACkEA,eADlE;AAAA,UAECN,iBAFD,GAEmCD,WAFnC,CAECC,iBAFD;AAAA,UAEoBC,UAFpB,GAEmCF,WAFnC,CAEoBE,UAFpB;AAGP,aACE;AAAK,QAAA,GAAG,EAAEP,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,IAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAS,qBAAU,eAAnB;AAAmC,QAAA,GAAG,EAAED,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,IAAC,WAAD;AACE,QAAA,SAAS,EAAE,KAAKwF,QADlB;AAEE,QAAA,UAAU,EAAE/E,UAFd;AAGE,QAAA,qBAAqB,EAAE,KAAKgF,oBAH9B;AAIE,QAAA,iBAAiB,EAAElF,iBAJrB;AAKE,QAAA,UAAU,EAAEC,UALd;AAME,QAAA,cAAc,EAAE,KAAKkF,oBANvB;AAOE,QAAA,aAAa,EAAE,KAAKC,aAPtB;AAQE,QAAA,oBAAoB,EAAE,KAAKC,oBAR7B;AASE,QAAA,eAAe,EAAE,KAAKC,cATxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAYE,IAAC,MAAD;AACE,QAAA,SAAS,EAAE,KAAKL,QADlB;AAEE,QAAA,WAAW,EAAElF,WAFf;AAGE,QAAA,iBAAiB,EAAEE,UAAU,CAACD,iBAAD,CAH/B;AAIE,QAAA,KAAK,EAAEF,WAJT;AAKE,QAAA,KAAK,EAAE,KAAKmF,QALd;AAME,QAAA,aAAa,EAAE,KAAKM,kBANtB;AAOE,QAAA,mBAAmB,EAAE,KAAKL,oBAP5B;AAQE,QAAA,YAAY,EAAE3E,YARhB;AASE,QAAA,WAAW,EAAEC,WATf;AAUE,QAAA,eAAe,EAAEF,eAVnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CAFF,EA2BE;AAAK,QAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA3BF,EA4BE;AAAQ,QAAA,OAAO,EAAE,KAAKkF,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5BF,CADF;AAgCD;;;;EAlagBpG,S;;AAqanB,eAAeS,IAAf","sourcesContent":["/** @jsx jsx */\r\nimport { jsx } from '@emotion/core';\r\nimport nanoid from 'nanoid';\r\nimport React, { Component, createRef } from 'react';\r\nimport Canvas from '../components/canvas';\r\nimport LeftSidebar from '../components/LeftSideBar';\r\nimport { ICharacteristicElement } from '../components/canvas/CharacteristicsLayer';\r\nimport Nav from '../components/Nav';\r\nimport { containerStyle, pageStyle } from './styles';\r\nimport * as icons from '../assets/icons';\r\nimport Konva from 'konva'\r\n\r\ninterface IHomeState {\r\n  canvasImage: HTMLImageElement | null;\r\n  canvasTexts: ICanvasTexts;\r\n  formValues: IAdoptionForm;\r\n  characteristics: ICharacteristics;\r\n  canvasHeight: number;\r\n  canvasWidth: number;\r\n}\r\n\r\nexport interface ICanvasTexts {\r\n  selectedTextBlock: string; // TODO: Change this for a string union type\r\n  textBlocks: ITextBlocks\r\n}\r\n\r\ninterface ICharacteristics {\r\n  [priority: string] : ICharacteristicElement;\r\n}\r\n\r\ninterface ITextBlocks {\r\n    // TODO: Change keys on this objects also for a string uniion type.\r\n    // (Based on the types of TextBlocksCreator.buttonsKeys )\r\n    [s: string]: ITextBlockElement;\r\n}\r\n\r\nexport interface ITextBlockElement {\r\n  id: string;\r\n  text: string;\r\n  fontSize: 'small' | 'medium' | 'large';\r\n  color: 'black' | 'red' | 'green' | 'purple' | 'yellow' | 'white';\r\n  position: {\r\n    x: number;\r\n    y: number;\r\n  };\r\n  width?: number;\r\n  align?: 'left' | 'center' | 'right';\r\n  style?: 'normal' | 'bold' |  'italic';\r\n}\r\n\r\nexport interface IAdoptionForm {\r\n  'nombre-mascota': string;\r\n  'nombre-contacto': string;\r\n  'telefono-contacto': string;\r\n  'whatsapp-contacto': string;\r\n  'email-contacto': string;\r\n  'esterilizado': boolean;\r\n  'chip': boolean;\r\n  'vacunas': boolean;\r\n  'edad-mascota': string;\r\n  'informacion-extra-mascota'?: string;\r\n  'tamaño-mascota': string;\r\n  'caso-mascota': string;\r\n  'ciudad-contacto': string;\r\n  'sexo-mascota': string;\r\n}\r\n\r\nclass Home extends Component<any, IHomeState> {\r\n  state = {\r\n    canvasImage: null,\r\n    canvasTexts: {\r\n      selectedTextBlock : '',\r\n      textBlocks: {} as ITextBlocks\r\n    },\r\n    formValues: {\r\n      chip: false,\r\n      'edad-mascota': '',\r\n      'email-contacto': '',\r\n      esterilizado: false,\r\n      'informacion-extra-mascota': '',\r\n      'nombre-contacto': '',\r\n      'nombre-mascota': '',\r\n      'tamaño-mascota': '',\r\n      'telefono-contacto': '',\r\n      vacunas: false,\r\n      'whatsapp-contacto': '',\r\n      'caso-mascota': '',\r\n      'ciudad-contacto': '',\r\n      'sexo-mascota': ''\r\n    },\r\n    characteristics: {},\r\n    canvasHeight: 750,\r\n    canvasWidth: 500,\r\n  };\r\n\r\n  stageRef = createRef<any>();\r\n\r\n  componentDidMount() {\r\n    //this.addTextBlock();\r\n    console.log(window.devicePixelRatio);\r\n  }\r\n\r\n  setSelectedTextBlock = (selectedTextBlock: string) => {\r\n    const { canvasTexts } = this.state;\r\n    this.setState({\r\n      canvasTexts: {\r\n        ...canvasTexts,\r\n        selectedTextBlock\r\n      }\r\n    });\r\n  };\r\n\r\n  setCanvasImage = (image: HTMLImageElement) => {\r\n    this.setState({\r\n      canvasImage: image\r\n    });\r\n  };\r\n\r\n  onTextChanged = (key: string, value: string, id: string) => {\r\n    const { canvasTexts } = this.state;\r\n    const { textBlocks } = canvasTexts;\r\n    this.setState({\r\n      canvasTexts: {\r\n        ...canvasTexts,\r\n        textBlocks: {\r\n          ...textBlocks,\r\n          [id]: {\r\n            ...textBlocks[id],\r\n            [key]: value\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onTextBlockChanged = (id: string, text: string) => {\r\n    const { canvasTexts } = this.state;\r\n    const { textBlocks } = canvasTexts;\r\n    this.setState(\r\n      {\r\n        canvasTexts: {\r\n          ...canvasTexts,\r\n          textBlocks: {\r\n            ...textBlocks,\r\n            [id]: {\r\n              ...textBlocks[id],\r\n              text\r\n            }\r\n          }\r\n        }\r\n      },\r\n      () => {\r\n        console.log(this.state);\r\n      }\r\n    );\r\n  };\r\n\r\n  setAdoptionFormField = (key: keyof IAdoptionForm, value: any) => {\r\n    const { canvasTexts, canvasHeight, canvasWidth, characteristics } = this.state;\r\n    const { textBlocks } = canvasTexts;\r\n    const actualCharacteristics: ICharacteristics = characteristics;\r\n    let newTextBlock: ITextBlockElement = {\r\n      id: key,\r\n      color: 'black',\r\n      text: value,\r\n      fontSize: 'medium',\r\n      position: {x: 0, y: 0}\r\n    }\r\n    let characteristic: ICharacteristicElement = {\r\n      priority: '',\r\n      text: '',\r\n      icon: ''\r\n    }\r\n    let validator: '' | 'textBlock' | 'characteristic' | 'deletedCharacteristic'= '';\r\n    switch (key) {\r\n      case 'nombre-mascota' :\r\n        newTextBlock.align = 'center';\r\n        newTextBlock.width = canvasWidth;\r\n        newTextBlock.position.y = canvasHeight*0.1;\r\n        newTextBlock.style = 'bold';\r\n        newTextBlock.fontSize = 'large';\r\n        validator = 'textBlock';\r\n        break;\r\n      case 'caso-mascota' :\r\n        newTextBlock.align = 'center';\r\n        newTextBlock.width = canvasWidth;\r\n        newTextBlock.position.y = canvasHeight*0.2;\r\n        newTextBlock.text = value === '1' ? \"En adopción\" : 'Perdido';\r\n        validator = 'textBlock';\r\n        break;\r\n      case 'edad-mascota' :\r\n        characteristic = {\r\n          priority: '0',\r\n          icon: icons.birthday_cake,\r\n          text: value\r\n        }\r\n        validator = 'characteristic';\r\n        break;\r\n      case 'sexo-mascota' :\r\n        characteristic = {\r\n          priority: '1',\r\n          icon: value === '1' ? icons.mars : icons.venus,\r\n          text: value === '1' ? 'Macho' : 'Hembra'\r\n        }\r\n        validator = 'characteristic';\r\n        break;\r\n      case 'tamaño-mascota' :\r\n        characteristic = {\r\n          priority: '3',\r\n          icon: icons.dog,\r\n          text: value === 's' ? 'Pequeño' : value === 'm' ? 'Mediano' : 'Grande'\r\n        }\r\n        validator = 'characteristic';\r\n        break;\r\n      case 'esterilizado' :\r\n        if(value) {\r\n          characteristic = {\r\n            priority: '4',\r\n            icon: icons.band_aid,\r\n            text: 'Esterilizado'\r\n          }\r\n          validator = 'characteristic';\r\n        }\r\n        else {\r\n          delete actualCharacteristics['4'];\r\n          validator = 'deletedCharacteristic';\r\n        }\r\n        break;\r\n      case 'chip' :\r\n        if(value) {\r\n          characteristic = {\r\n            priority: '5',\r\n            icon: icons.paw,\r\n            text: 'Con chip'\r\n          }\r\n          validator = 'characteristic';\r\n        }\r\n        else {\r\n          delete actualCharacteristics['5'];\r\n          validator = 'deletedCharacteristic';\r\n        }\r\n        break;\r\n      case 'vacunas' :\r\n        if(value) {\r\n          characteristic = {\r\n            priority: '6',\r\n            icon: icons.syringe,\r\n            text: 'Al día'\r\n          }\r\n          validator = 'characteristic';\r\n        }\r\n        else {\r\n          delete actualCharacteristics['6'];\r\n          validator = 'deletedCharacteristic';\r\n        }\r\n        break;\r\n      case 'nombre-contacto':\r\n        newTextBlock.fontSize = 'small';\r\n        newTextBlock.position = {x: canvasWidth*0.8, y: canvasHeight*0.7};\r\n        validator = 'textBlock';\r\n        break;\r\n      case 'telefono-contacto':\r\n        newTextBlock.fontSize = 'small';\r\n        newTextBlock.position = {x: canvasWidth*0.8, y: canvasHeight*0.7 + 20};\r\n        validator = 'textBlock';\r\n        break;\r\n        case 'email-contacto':\r\n          newTextBlock.fontSize = 'small';\r\n          newTextBlock.position = {x: canvasWidth*0.8, y: canvasHeight*0.7 + 40};\r\n          validator = 'textBlock';\r\n          break;\r\n        case 'ciudad-contacto':\r\n          newTextBlock.fontSize = 'small';\r\n          newTextBlock.position = {x: canvasWidth*0.8, y: canvasHeight*0.7 + 60};\r\n          validator = 'textBlock';\r\n          break;\r\n\r\n    }\r\n    if(validator === 'textBlock') {\r\n      this.setState({\r\n        formValues: {\r\n          ...this.state.formValues,\r\n          [key]: value\r\n        },\r\n        canvasTexts: {\r\n          ...canvasTexts,\r\n          textBlocks: {\r\n            ...textBlocks,\r\n            [key]: newTextBlock\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else if (validator === 'characteristic') {\r\n      this.setState({\r\n        formValues: {\r\n          ...this.state.formValues,\r\n          [key]: value\r\n        },\r\n        characteristics: {\r\n          ...characteristics,\r\n          [characteristic.priority]: characteristic\r\n        }\r\n      });\r\n    }\r\n    else if (validator = 'deletedCharacteristic') {\r\n      this.setState({\r\n        formValues: {\r\n          ...this.state.formValues,\r\n          [key]: value\r\n        },\r\n        characteristics: actualCharacteristics\r\n      });\r\n    }\r\n  };\r\n\r\n  deleteCharacteristic = (characPriority: string) => {\r\n    const { characteristics } = this.state;\r\n    const actualCharacteristics: ICharacteristics = characteristics;\r\n    const updatePriority: ICharacteristics = {};\r\n    Object.keys(characteristics).forEach(priority => {\r\n      if (priority !== characPriority) {\r\n        updatePriority[priority] = actualCharacteristics[priority];\r\n      }\r\n    })\r\n  }\r\n\r\n  /*addTextBlock = () => {\r\n    const { canvasTexts } = this.state;\r\n    const { textBlocks } = canvasTexts;\r\n\r\n    const id = nanoid();\r\n    const newTextblock: ITextBlockElement = {\r\n      color: 'black',\r\n      fontSize: 'medium',\r\n      id,\r\n      text: ''\r\n    };\r\n\r\n    this.setState({\r\n      canvasTexts: {\r\n        ...canvasTexts,\r\n        textBlocks: {\r\n          ...textBlocks,\r\n          [id]: newTextblock\r\n        }\r\n      }\r\n    });\r\n  };*/\r\n\r\n  addTextBlockWithData = (newTextblock: ITextBlockElement) => {\r\n    const { canvasTexts } = this.state;\r\n    const { textBlocks } = canvasTexts;\r\n    const id = newTextblock.id;\r\n    this.setState({\r\n      canvasTexts: {\r\n        ...canvasTexts,\r\n        textBlocks: {\r\n          ...textBlocks,\r\n          [id]: newTextblock\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  test() {\r\n    let stage = new Konva.Stage({\r\n      container: 'testcanvas',\r\n      width: 500,\r\n      height: 750\r\n    });\r\n\r\n    let layer = new Konva.Layer();\r\n    let layer2 = new Konva.Layer();\r\n    let layer3 = new Konva.Layer();\r\n    let layer4 = new Konva.Layer();\r\n\r\n    let text = new Konva.Text({\r\n      text: 'Perritu',\r\n      fontSize: 20,\r\n      width: 500,\r\n      align: 'center',\r\n      y:50,\r\n      fontStyle: 'bold'\r\n    })\r\n\r\n    let text2 = new Konva.Text({\r\n      text: 'Aaaaaaaaa',\r\n      fontSize: 15,\r\n      width: 500,\r\n      align: 'center',\r\n      y:150\r\n    })\r\n\r\n    let text3 = new Konva.Text({\r\n      text: 'uwu',\r\n      fontSize: 10,\r\n      y:250,\r\n      x: 60\r\n    })\r\n\r\n    let text4 = new Konva.Text({\r\n      text: 'uwu',\r\n      fontSize: 10,\r\n      y:450,\r\n      x: 90\r\n    })\r\n\r\n    // create label\r\n    var label = new Konva.Label({\r\n      x: 100,\r\n      y: 100,\r\n      draggable: true\r\n    });\r\n\r\n    // add a tag to the label\r\n    label.add(new Konva.Tag({\r\n      fill: 'transparent'\r\n    }));\r\n\r\n    // add text to the label\r\n    label.add(new Konva.Text({\r\n      text: 'Hello World!',\r\n      fontSize: 20,\r\n      lineHeight: 1.2,\r\n      padding: 10,\r\n      fill: 'green'\r\n    }));\r\n\r\n    layer.add(label);\r\n\r\n    layer.add(text);\r\n    layer2.add(text2);\r\n    layer3.add(text3);\r\n    layer4.add(text4);\r\n    stage.add(layer);\r\n    stage.add(layer2);\r\n    stage.add(layer3);\r\n    stage.add(layer4);\r\n\r\n    const imgB64 = stage.toDataURL({ pixelRatio: 3, quality:1, mimeType: 'image/png', width: 500, height: 750 });\r\n    //document.write('img src=\"'+imgB64+'\" />');\r\n    let link = document.createElement('a');\r\n    link.download = \"Test\";\r\n    link.href = imgB64;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n\r\n  render() {\r\n    const { canvasImage, canvasTexts, formValues, canvasHeight, canvasWidth, characteristics } = this.state;\r\n    const { selectedTextBlock, textBlocks } = canvasTexts;\r\n    return (\r\n      <div css={pageStyle}>\r\n        <Nav />\r\n        <section data-name=\"bodycontainer\" css={containerStyle}>\r\n          <LeftSidebar\r\n            canvasRef={this.stageRef}\r\n            formValues={formValues}\r\n            onTextBlockInteracted={this.setSelectedTextBlock}\r\n            selectedTextBlock={selectedTextBlock}\r\n            textBlocks={textBlocks}\r\n            onInputChanged={this.setAdoptionFormField}\r\n            onTextChanged={this.onTextChanged}\r\n            addTextBlockWithData={this.addTextBlockWithData}\r\n            onImageUploaded={this.setCanvasImage}\r\n          />\r\n          <Canvas\r\n            canvasRef={this.stageRef}\r\n            canvasTexts={canvasTexts}\r\n            currentCanvasText={textBlocks[selectedTextBlock]}\r\n            image={canvasImage}\r\n            onRef={this.stageRef}\r\n            onTextChanged={this.onTextBlockChanged}\r\n            onTextBlockSelected={this.setSelectedTextBlock}\r\n            canvasHeight={canvasHeight}\r\n            canvasWidth={canvasWidth}\r\n            characteristics={characteristics}\r\n          />\r\n        </section>\r\n        <div id='testcanvas'></div>\r\n        <button onClick={this.test}>Hola</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n\r\n"]},"metadata":{},"sourceType":"module"}